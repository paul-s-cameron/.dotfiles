- defaults:
    link:
      force: true
      create: true
      relink: true
    shell:
      stderr: true

- clean:
    ~/:
      force: true
    ~/.config:
      recursive: true

- shell:
    - [if ! hash yay 2>/dev/null; then sudo pacman -S --needed git base-devel && git clone https://aur.archlinux.org/yay.git && cd yay && makepkg -si && cd .. && rm -r yay; fi, Installing yay]
    - [yay -S --needed --noconfirm - < ~/.dotfiles/packages, Installing packages]
    - [sh pre-install.sh, Running pre installation script]

- create:
    - ~/downloads
    - ~/wallpapers
    - ~/.oh-my-zsh/custom/
    - ~/.oh-my-zsh/custom/plugins
    - ~/.config/Vencord/
    - ~/.config/systemd/user/
    - ~/.local/share/rofi

- link:
    ~/.config/hypr: config/hypr
    ~/.config/ghostty: config/ghostty
    ~/.config/waybar: config/waybar
    ~/.config/yazi: config/yazi
    ~/.config/rofi: config/rofi
    ~/.config/hyprpanel: config/hyprpanel
    ~/.config/systemd/user/hyprpanel.service: services/hyprpanel.service
    ~/.local/share/rofi/themes: themes/rofi
    ~/.config/Vencord/settings: config/Vencord/settings
    ~/.config/Vencord/themes: config/Vencord/themes
    ~/.config/Vencord/vencord-settings.json: config/Vencord/vencord-settings.json
    ~/.oh-my-zsh/custom/alias.zsh: oh-my-zsh/custom/alias.zsh
    ~/.oh-my-zsh/custom/themes/powerlevel10k: oh-my-zsh/custom/themes/powerlevel10k
    ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions: oh-my-zsh/custom/plugins/zsh-autosuggestions/
    ~/.oh-my-zsh/custom/plugins/zsh-completions: oh-my-zsh/custom/plugins/zsh-completions/
    ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting: oh-my-zsh/custom/plugins/zsh-syntax-highlighting/
    ~/.zshrc: zshrc
    ~/.scripts: scripts
    ~/.p10k.zsh: p10k.zsh
    ~/.gitconfig: gitconfig

- shell:
    - [chmod +x -R ~/.scripts, Authorizing scripts]
    - [git submodule update --init --recursive, Installing submodules]
    - [systemctl --user enable --now hyprpolkitagent, Enabling hyrpolkitagent]
    - [systemctl --user enable --now hypridle, Enabling hypridle]
    - [systemctl --user enable --now hyprpanel, Enabling hypridle]